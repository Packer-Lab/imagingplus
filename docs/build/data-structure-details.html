
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Data Structure Inside Trial objects &#8212; imaging+ 0.2-beta documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxdoc.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Plotting of data and analyses" href="making-plots.html" />
    <link rel="prev" title="Tutorial 8 - Extending built in classes" href="Tutorials/Tutorial-8-Extending-built-in-classes.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="making-plots.html" title="Plotting of data and analyses"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Tutorials/Tutorial-8-Extending-built-in-classes.html" title="Tutorial 8 - Extending built in classes"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">imaging+ 0.2-beta documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Data Structure Inside Trial objects</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="data-structure-inside-trial-objects">
<span id="data-structure-details"></span><h1>Data Structure Inside Trial objects<a class="headerlink" href="#data-structure-inside-trial-objects" title="Permalink to this headline">¶</a></h1>
<section id="anndata-object-for-storing-multi-modal-data">
<h2><em>AnnData</em> object for storing multi-modal data<a class="headerlink" href="#anndata-object-for-storing-multi-modal-data" title="Permalink to this headline">¶</a></h2>
<p>The AnnData library is used to store fluorescence imaging data in an efficient, multi-functional format.</p>
<p>Further processing on the raw data is added to the AnnData object as <code class="docutils literal notranslate"><span class="pre">layers</span></code>. For instance, dFF normalization of the raw data is added as the <code class="docutils literal notranslate"><span class="pre">dFF</span></code> layer to the existing data table.</p>
<p>This is stored under: <code class="docutils literal notranslate"><span class="pre">trialobject.data</span></code>.
The AnnData object is built around the raw Flu matrix of each <code class="docutils literal notranslate"><span class="pre">trialobject</span></code>.
In keeping with AnnData conventions, the data structure is organized in <em>n</em> observations (obs) x <em>m</em> variables (var), where observations are suite2p ROIs and variables are imaging frame timepoints.
The rest of the AnnData data object is built according to these dimensions.
For instance, the metadata for each suite2p ROI stored in Suite2p’s stat.npy output is added to <code class="docutils literal notranslate"><span class="pre">trialobject.data</span></code> under <code class="docutils literal notranslate"><span class="pre">obs</span></code> and <code class="docutils literal notranslate"><span class="pre">obsm</span></code> (1D and &gt;1-D observations annotations, respectively).
And the temporal synchronization data of the experiment collected in .paq output is added to the variables annotations under <code class="docutils literal notranslate"><span class="pre">var</span></code>.</p>
<a class="reference internal image-reference" href="_images/packerlabimaging-anndata-integration-01.jpg"><img alt="_images/packerlabimaging-anndata-integration-01.jpg" src="_images/packerlabimaging-anndata-integration-01.jpg" style="width: 600px;" /></a>
<p>The primary benefit of anndata is that it enforces an intuitive data structure and allows a workflow that maintains relationships between different data sources and types, including processed data.
Lastly, AnnData objects are highly scalable, allowing individual users to further modify and add observations and variables of their own as their experiment dictates. Note: since AnnData is an independent library, they have an implementation for unstructured data annotations, however usage of this feature is not recommended within the packerlabimaging ecosystem as unstructured data elements should be built as attributes of the <code class="docutils literal notranslate"><span class="pre">trialobject</span></code>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/imagingplus-logo.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Data Structure Inside Trial objects</a><ul>
<li><a class="reference internal" href="#anndata-object-for-storing-multi-modal-data"><em>AnnData</em> object for storing multi-modal data</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="Tutorials/Tutorial-8-Extending-built-in-classes.html"
                          title="previous chapter">Tutorial 8 - Extending built in classes</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="making-plots.html"
                          title="next chapter">Plotting of data and analyses</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/data-structure-details.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="making-plots.html" title="Plotting of data and analyses"
             >next</a> |</li>
        <li class="right" >
          <a href="Tutorials/Tutorial-8-Extending-built-in-classes.html" title="Tutorial 8 - Extending built in classes"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">imaging+ 0.2-beta documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Data Structure Inside Trial objects</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Packer Lab.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>